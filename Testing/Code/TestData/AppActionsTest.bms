ExitOnError( '1' )
# Run Generate Spheres that generes 15 spheres from 5 to 20
SetApp(genspheres @GenerateSpheres)
Run(res ${genspheres})
# Run Pixel Counter
sequence( spheres 5 19 1 )
foreach( sphere ${spheres} )
         Set( spherefilename 'sphere_'${sphere}'.mha')
         Echo( ${spherefilename} )
         SetApp(pixcount @PixelCounter)
         SetAppOption(pixcount.filename ${spherefilename})
         SetAppOption(pixcount.threshold 10)
         SetAppOption(pixcount.GenerateMetaOutput 1 )
         SetAppOption(pixcount.GenerateXMLFile 1 )
         SetAppOption(pixcount.GenerateXMLFile.GenerateXMLFile 'test.xml')
         Run(res ${pixcount})
         DeleteFile( 'test.xml' )
         DeleteFile( ${spherefilename} )
endforeach( sphere )
